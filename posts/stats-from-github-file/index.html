<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Serve a JSON API with GitHub | Josh Kasuboski</title><meta name=description content="Josh Kasuboski's personal site"><meta name=author content="Josh Kasuboski"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.joshkasuboski.com/img/josh-scotland-full.jpg"><meta name=twitter:title content="Serve a JSON API with GitHub"><meta name=twitter:description content="I wanted to add stats to a site, but I already capture them in a GitHub Repo. Let's just pull from there."><meta property="og:title" content="Serve a JSON API with GitHub"><meta property="og:description" content="I wanted to add stats to a site, but I already capture them in a GitHub Repo. Let's just pull from there."><meta property="og:type" content="article"><meta property="og:url" content="https://www.joshkasuboski.com/posts/stats-from-github-file/"><meta property="og:image" content="https://www.joshkasuboski.com/img/josh-scotland-full.jpg"><meta property="article:published_time" content="2020-09-17T13:18:28-05:00"><meta property="article:modified_time" content="2020-09-17T13:18:28-05:00"><link rel=me href=mailto:josh.kasuboski@gmail.com><link rel=me href=https://github.com/kasuboski><link data-proofer-ignore rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link data-proofer-ignore rel=microsub href=https://microsub.joshcorp.co/microsub><link rel=alternate type=application/rss+xml href=https://www.joshkasuboski.com/index.xml><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/turretcss/dist/turretcss.min.css crossorigin=anonymous><style>@media only screen and (min-width:768px){:root{font-size:18px}}body{background-color:#faf9fa}pre{background-color:#d4f2e1}a{text-decoration-color:#5965f9}#site-header{box-shadow:0 4px 12px 0 rgba(0,0,0,.05)}#intro{background-color:#e6e8fe}#social a{color:transparent;text-decoration:none}</style></head><body><div class=padding-bottom-s><header id=site-header><div class="container max-width-l flex-justify-center padding-vertical-xs"><h1 class=no-margin-bottom><a class="text-decoration-none flex align-items-center" href=https://www.joshkasuboski.com/><img alt="jk logo" class="icon-s margin-right-xs" src=https://www.joshkasuboski.com/images/jk-logo.svg><small>Josh Kasuboski</small></a></h1><nav class=nav-inline><ul><li><a href=/about/>About</a></li><li><a href=/now/>Now</a></li></ul></nav></div></header><main class="container max-width-l margin-top-l"><article class=h-entry><header><h1 class="display-title-xl no-margin-bottom post-title p-name">Serve a JSON API with GitHub</h1><p class="post-date no-margin-top">Posted on
<time class=dt-published datetime=2020-09-17T13:18:28-05:00>17 September, 2020</time> by <a href=https://www.joshkasuboski.com/ class="p-author h-card" rel=author>Josh Kasuboski</a> Â· 2min read</p></header><section class="content e-content margin-top-l"><p>I wanted to add stats to a site, but I already capture them in a GitHub Repo. Let's just pull from there.</p><h2 id=the-stats-repo>The Stats Repo</h2><p>I made a repo that pulls in stats (<a href=https://github.com/kasuboski/stats>kasuboski/stats</a>). It uses a GitHub Action I made for a <a href=https://dev.to/kasuboski/dev-to-article-stats-github-action-30n4>Dev.to</a> Hackathon that pulls post stats from Dev.to.</p><p>The repo gets periodically updated with a <code>stats/dev-to.json</code> file. GitHub lets you browse the contents of files at <code>raw.githubusercontent.com</code>. In my case, this file is at <a href=https://raw.githubusercontent.com/kasuboski/stats/main/stats/dev-to.json>https://raw.githubusercontent.com/kasuboski/stats/main/stats/dev-to.json</a>.</p><h2 id=fetching-the-data>Fetching the data</h2><p>I have a <a href=https://joshcorp.co>landing page</a> served from my <a href=https://www.joshkasuboski.com/posts/home-k8s-raspberry-update/>Raspberry Pi Cluster</a>. It was a placeholder with a link to my <a href=https://www.joshkasuboski.com>personal site</a>. Now it also shows stats from my <a href=https://dev.to/kasuboski>Dev.to posts</a>.</p><figure><a href=landing-page-stats.png><img src=landing-page-stats.png alt="Stats on the landing page"></a></figure><p>The landing page itself is just vanilla HTML/CSS/JS. It uses <a href=https://andybrewer.github.io/mvp/>mvp.css</a> to get quick styles. The repo is <a href=https://github.com/kasuboski/joshcorp-site>kasuboski/joshcorp-site</a>. The javascript needed to add the stats is below. It's just in a <code>script</code> tag in the body.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getStats</span>() {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>stats</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;#stats&#39;</span>);
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>reactions</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;#reactions-value&#39;</span>);
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>views</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>querySelector</span>(<span style=color:#e6db74>&#39;#views-value&#39;</span>);
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;https://raw.githubusercontent.com/kasuboski/stats/main/stats/dev-to.json&#39;</span>;
  <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>)
    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>())
    .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>data</span> =&gt; {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>data</span>);
      <span style=color:#a6e22e>reactions</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>public_reactions_count</span>;
      <span style=color:#a6e22e>views</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>page_views_count</span>;
      <span style=color:#a6e22e>stats</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>display</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;block&#34;</span>;
    })
    .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>err</span> =&gt; {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;Error fetching stats: &#39;</span>, <span style=color:#a6e22e>err</span>);
    })
}

window.<span style=color:#a6e22e>onload</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getStats</span>;
</code></pre></div><p>I'm sure this probably isn't something GitHub exactly recommends&mldr; but as long as you don't have too much traffic it should be fine.</p></section><footer class=margin-top-m><a class="permalink u-url text-decoration-none" href=https://www.joshkasuboski.com/posts/stats-from-github-file/>ðŸ”—</a></footer></article><nav class="margin-top-l flex justify-content-space-around"><div><a alt="Newer article" href=https://www.joshkasuboski.com/posts/image-scanning-trivy/>&larr; Container Image Scanning with Trivy</a></div><div class=show-s-up><a data-proofer-ignore alt="Top of page" href=#>Top</a></div><div><a alt="Older article" href=https://www.joshkasuboski.com/posts/pushover-notifications/>Getting Push Notifications for Everything with Pushover &rarr;</a></div></nav></main><footer class="container max-width-l margin-top-xl"><div class=margin-bottom-m><h4>Get more of my thoughts in an email newsletter!</h4><form action=https://buttondown.email/api/emails/embed-subscribe/kasuboski method=post target=popupwindow onsubmit="window.open('https://buttondown.email/kasuboski','popupwindow')" class=embeddable-buttondown-form><label for=bd-email>Your Email</label>
<input type=email name=email id=bd-email placeholder=me@email.com></input>
<input type=hidden value=1 name=embed></input>
<button class="button button-primary button-border" type=submit value=Subscribe>Subscribe</button><p class=font-size-s><a href=https://buttondown.email target=_blank>Powered by Buttondown.</a></p></form></div><div class="box-shadow-l padding-m"><div class="h-card flex align-content-center"><figure class=icon-xxl><img alt="profile photo" class=u-photo src=https://www.joshkasuboski.com/img/josh-scotland.jpg></figure><div class=margin-left-m><h3 class=display-title><a class="u-url p-name text-decoration-none" href=https://www.joshkasuboski.com/>Josh Kasuboski</a></h3><p>Living in Austin <img class=icon-xs style=vertical-align:middle alt=texas src=https://www.joshkasuboski.com/img/tx-fill.png> from <img class=icon-xs style=vertical-align:middle alt=wisconsin src=https://www.joshkasuboski.com/img/wi-fill.png></p><p id=social><a rel=me class="u-url margin-right-xs" href=https://github.com/kasuboski><img class=icon-xs src=https://www.joshkasuboski.com/icons/github.svg alt=github></a>
<a class=margin-right-xs href=https://linkedin.com/in/joshkasuboski/><img class=icon-xs src=https://www.joshkasuboski.com/icons/linkedin.svg alt=linkedin></a>
<a href=mailto:josh.kasuboski@gmail.com class="u-email margin-right-xxs" rel=me><img class=icon-xs src=https://www.joshkasuboski.com/icons/envelope.svg alt=email></a>
<a href=https://www.joshkasuboski.com/payments/><img class=icon-xs src=https://www.joshkasuboski.com/icons/beer-money-icon.svg alt=beermoney></a></p></div></div></div></footer></div><script async src=https://rum.cronitor.io/script.js></script><script>window.cronitor=window.cronitor||function(){(window.cronitor.q=window.cronitor.q||[]).push(arguments);};cronitor('config',{clientKey:'b2a9cb0f440d559169438f89c882dddb'});</script></body></html>