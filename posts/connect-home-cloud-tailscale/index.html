<!doctype html><html lang=en-US><head><meta charset=utf-8><title>Connect Your Home to the Cloud with Tailscale | Josh Kasuboski</title>
<meta name=description content="Josh Kasuboski's personal site"><meta name=author content="Josh Kasuboski"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.joshkasuboski.com/img/josh-scotland-full.jpg"><meta name=twitter:title content="Connect Your Home to the Cloud with Tailscale"><meta name=twitter:description content="I set up my Raspberry Pi cluster to be accessible from the internet without configuring a port-forward on my router."><meta property="og:url" content="https://www.joshkasuboski.com/posts/connect-home-cloud-tailscale/"><meta property="og:site_name" content="Josh Kasuboski"><meta property="og:title" content="Connect Your Home to the Cloud with Tailscale"><meta property="og:description" content="I set up my Raspberry Pi cluster to be accessible from the internet without configuring a port-forward on my router."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-24T11:05:17-05:00"><meta property="article:modified_time" content="2020-08-24T11:05:17-05:00"><meta property="og:image" content="https://www.joshkasuboski.com/img/josh-scotland-full.jpg"><link rel=me href=mailto:josh.kasuboski@gmail.com><link rel=me href=https://github.com/kasuboski><link data-proofer-ignore rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link data-proofer-ignore rel=microsub href=https://microsub.joshcorp.co/microsub><link rel=alternate type=application/rss+xml href=https://www.joshkasuboski.com/index.xml><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/turretcss/dist/turretcss.min.css crossorigin=anonymous><style>@media only screen and (min-width:768px){:root{font-size:18px}}body{background-color:#faf9fa}pre{background-color:#d4f2e1}a{text-decoration-color:#5965f9}#site-header{box-shadow:0 4px 12px rgba(0,0,0,5%)}#intro{background-color:#e6e8fe}#social a{color:transparent;text-decoration:none}</style></head><body><div class=padding-bottom-s><header id=site-header><div class="container max-width-l flex-justify-center padding-vertical-xs"><h1 class=no-margin-bottom><a class="text-decoration-none flex align-items-center" href=https://www.joshkasuboski.com/><img alt="jk logo" class="icon-s margin-right-xs" src=https://www.joshkasuboski.com/images/jk-logo.svg><small>Josh Kasuboski</small></a></h1><nav class=nav-inline><ul><li><a href=/about/>About</a></li><li><a href=/now/>Now</a></li></ul></nav></div></header><main class="container max-width-l margin-top-l"><article class=h-entry><header><h1 class="display-title-xl no-margin-bottom post-title p-name">Connect Your Home to the Cloud with Tailscale</h1><p class="post-date no-margin-top">Posted on
<time class=dt-published datetime=2020-08-24T11:05:17-05:00>24 August, 2020
</time>by <a href=https://www.joshkasuboski.com/ class="p-author h-card" rel=author>Josh Kasuboski</a> Â· 2min read</p></header><section class="content e-content margin-top-l"><p>I set up my Raspberry Pi cluster to be accessible from the internet without configuring a port-forward on my router.</p><h2 id=tailscale>Tailscale</h2><p><a href=https://tailscale.com/>Tailscale</a> will create a private network using <a href=https://www.wireguard.com/>Wireguard</a>. Wireguard isn&rsquo;t really that difficult to configure on its own, but you do have to manually generate and distribute keys. Tailscale will take care of that for you and they also have some <a href=https://tailscale.com/blog/how-nat-traversal-works/>fallbacks</a> for difficult networks. It doesn&rsquo;t look like any of my nodes are using a fallback option based on the dashboard.</p><p>Setting up Tailscale is as easy as installing it and running <code>tailscale up</code>. Until recently, this required you to login interactively. Tailscale now supports <a href=https://tailscale.com/kb/1068/acl-tags#pre-authenticated-keys>pre-authenticated</a> keys which means you can automate the setup.</p><h2 id=installing-on-raspberry-pis>Installing on Raspberry PIs</h2><p>I made <a href=https://github.com/kasuboski/tailscale-install>kasuboski/tailscale-install</a> to automate the installation and start of Tailscale on Raspberry PIs. I plan to expand it to work on more varied platforms in the future.</p><p>It&rsquo;s a <a href=https://pyinfra.com/>PyInfra deploy</a> that basically just adds the package and runs <code>tailscale up</code> with a key sourced from the environment. I was able to add my Raspberry Pi cluster to the network in around 5 minutes, using this.</p><h2 id=exposing-to-the-internet>Exposing to the internet</h2><p>My cluster ingress is now slightly different than described <a href=https://www.joshkasuboski.com/posts/home-k8s-raspberry-update/>here</a>. Traffic from the Linode now goes directly to the Kubernetes nodes on the port exposed by the nginx-ingress controller. This just removes the extra hop that was initially an internal haproxy running on a different Raspberry Pi.</p><figure><img src=/posts/connect-home-cloud-tailscale/tailscale-diagram.png alt="Network Diagram"></figure></section><footer class=margin-top-m><a class="permalink u-url text-decoration-none" href=https://www.joshkasuboski.com/posts/connect-home-cloud-tailscale/>ðŸ”—</a></footer></article><nav class="margin-top-l flex justify-content-space-around"><div><a alt="Newer article" href=https://www.joshkasuboski.com/posts/pushover-notifications/>&larr; Getting Push Notifications for Everything with Pushover</a></div><div class=show-s-up><a data-proofer-ignore alt="Top of page" href=#>Top</a></div><div><a alt="Older article" href=https://www.joshkasuboski.com/posts/generate-resume-gh-actions/>Generate Your Resume with GitHub Actions &rarr;</a></div></nav></main><footer class="container max-width-l margin-top-xl"><div class=margin-bottom-m><h4>Get more of my thoughts in an email newsletter!</h4><form action=https://buttondown.email/api/emails/embed-subscribe/kasuboski method=post target=popupwindow onsubmit='window.open("https://buttondown.email/kasuboski","popupwindow")' class=embeddable-buttondown-form><label for=bd-email>Your Email</label>
<input type=email name=email id=bd-email placeholder=me@email.com></input>
<input type=hidden value=1 name=embed></input>
<button class="button button-primary button-border" type=submit value=Subscribe>Subscribe</button><p class=font-size-s><a href=https://buttondown.email target=_blank>Powered by Buttondown.</a></p></form></div><div class="box-shadow-l padding-m"><div class="h-card flex align-content-center"><figure class=icon-xxl><img alt="profile photo" class=u-photo src=https://www.joshkasuboski.com/img/josh-scotland.jpg></figure><div class=margin-left-m><h3 class=display-title><a class="u-url p-name text-decoration-none" href=https://www.joshkasuboski.com/>Josh Kasuboski</a></h3><p>Living in Austin <img class=icon-xs style=vertical-align:middle alt=texas src=https://www.joshkasuboski.com/img/tx-fill.png> from <img class=icon-xs style=vertical-align:middle alt=wisconsin src=https://www.joshkasuboski.com/img/wi-fill.png></p><p id=social><a rel=me class="u-url margin-right-xs" href=https://github.com/kasuboski><img class=icon-xs src=https://www.joshkasuboski.com/icons/github.svg alt=github>
</a><a class=margin-right-xs href=https://linkedin.com/in/joshkasuboski/><img class=icon-xs src=https://www.joshkasuboski.com/icons/linkedin.svg alt=linkedin>
</a><a href=mailto:josh.kasuboski@gmail.com class="u-email margin-right-xxs" rel=me><img class=icon-xs src=https://www.joshkasuboski.com/icons/envelope.svg alt=email>
</a><a href=https://www.joshkasuboski.com/payments/><img class=icon-xs src=https://www.joshkasuboski.com/icons/beer-money-icon.svg alt=beermoney></a></p></div></div></div></footer></div><script async src=https://rum.cronitor.io/script.js></script><script>window.cronitor=window.cronitor||function(){(window.cronitor.q=window.cronitor.q||[]).push(arguments)},cronitor("config",{clientKey:"b2a9cb0f440d559169438f89c882dddb"})</script></body></html>