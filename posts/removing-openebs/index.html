<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Removing OpenEBS | Josh Kasuboski</title><meta name=description content="Josh Kasuboski's personal site"><meta name=author content><link rel=me href=mailto:josh.kasuboski@gmail.com><link rel=me href=https://github.com/kasuboski><link data-proofer-ignore rel=authorization_endpoint href=https://indieauth.com/auth><link rel=token_endpoint href=https://tokens.indieauth.com/token><link data-proofer-ignore rel=microsub href=https://microsub.joshcorp.co/microsub><link rel=alternate type=application/rss+xml href=https://www.joshkasuboski.com/index.xml><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=https://unpkg.com/turretcss/dist/turretcss.min.css crossorigin=anonymous><style>@media only screen and (min-width:768px){:root{font-size:18px}}body{background-color:#faf9fa}pre{background-color:#d4f2e1}a{text-decoration-color:#5965f9}#site-header{box-shadow:0 4px 12px 0 rgba(0,0,0,.05)}#intro{background-color:#e6e8fe}#social a{color:transparent;text-decoration:none}</style></head><body><div class=padding-bottom-s><header id=site-header><div class="container max-width-l flex-justify-center padding-vertical-xs"><h1 class=no-margin-bottom><a class="text-decoration-none flex align-items-center" href=https://www.joshkasuboski.com/><img alt="jk logo" class="icon-s margin-right-xs" src=https://www.joshkasuboski.com/images/jk-logo.svg><small>Josh Kasuboski</small></a></h1><nav class=nav-inline><ul><li><a href=/about/>About</a></li><li><a href=/now/>Now</a></li></ul></nav></div></header><main class="container max-width-l margin-top-l"><article class=h-entry><header><h1 class="display-title-xl no-margin-bottom post-title p-name">Removing OpenEBS</h1><p class="post-date no-margin-top">Posted on
<time class=dt-published datetime=2020-12-01T16:37:25-06:00>1 December, 2020</time> by <a href=https://www.joshkasuboski.com/ class="p-author h-card" rel=author>Josh Kasuboski</a> ¬∑ 2min read</p></header><section class="content e-content margin-top-l"><p>My OpenEBS install seemingly stopped working. üî•</p><h2 id=discovery>Discovery</h2><p>I actually didn't really notice it had stopped working until two days later. I have monitoring set up for some sites, but it was only testing that the page loaded, not that data loaded. Lesson learned there I guess.</p><p>The pods showed as having the storage attached, but it didn't work. Looking for the status of the various OpenEBS objects revealed that it was not healthy. I ran a couple commands that were mentioned in the kubernetes slack, but couldn't get it back.</p><p>Luckily, I had recently backed up the data. You can see how at <a href=https://www.joshkasuboski.com/posts/kubectl-cp/>copy files using kubectl</a>.</p><h2 id=moving-on>Moving On</h2><p>I decided I wanted to simplify the storage while I was redoing it anyway. In manually mounting my usb drives, I discovered that one was now permanently readonly. This was almost certainly the problem with OpenEBS, but I'd already uninstalled everything ü§∑‚Äç‚ôÇÔ∏è.</p><p>I'm now using the <a href=https://github.com/rancher/local-path-provisioner>local-storage-path</a> provisioner that's included with k3s. One Pi has the same model of microcenter usb drive as the one that failed and the other a <a href=https://kit.co/kasuboski/homelab/corsair-flash-voyage>Corsair Drive</a> that I had seen benchmarked as fast specifically on a Raspberry Pi.</p><p>Apps with storage are specifically pinned to either the slow disk node or the fast disk node. The apps on the fast disk node had issues with the OpenEBS and slow usb drive setup. They now perform significantly better.</p><p>Just a note, that uninstalling OpenEBS took me quite some time&mldr; I think maybe I did it in the wrong order because basically all resources got stuck with a finalizer that I then had to manually remove.</p><p>I'd like to try OpenEBS again, but maybe in a setup where I actually have three storage nodes and faster disks.</p><p>I'm excited to try Prometheus again, since previously the storage was just too slow. Although, I have plans to run it with Thanos so that most of the data will be in Minio (backed by my nas).</p></section><footer class=margin-top-m><a class="permalink u-url text-decoration-none" href=https://www.joshkasuboski.com/posts/removing-openebs/>üîó</a></footer></article><nav class="margin-top-l flex justify-content-space-around"><div><a alt="Newer article" href=https://www.joshkasuboski.com/posts/cluster-reprovisioning/>&larr; Re-provisioning the Cluster</a></div><div class=show-s-up><a data-proofer-ignore alt="Top of page" href=#>Top</a></div><div><a alt="Older article" href=https://www.joshkasuboski.com/posts/easy-multi-arch-deps/>Add Multi-Arch Dependencies Easily &rarr;</a></div></nav></main><footer class="container max-width-l margin-top-xl"><div class=margin-bottom-m><h4>Get more of my thoughts in an email newsletter!</h4><form action=https://buttondown.email/api/emails/embed-subscribe/kasuboski method=post target=popupwindow onsubmit="window.open('https://buttondown.email/kasuboski','popupwindow')" class=embeddable-buttondown-form><label for=bd-email>Your Email</label>
<input type=email name=email id=bd-email placeholder=me@email.com></input>
<input type=hidden value=1 name=embed></input>
<button class="button button-primary button-border" type=submit value=Subscribe>Subscribe</button><p class=font-size-s><a href=https://buttondown.email target=_blank>Powered by Buttondown.</a></p></form></div><div class="box-shadow-l padding-m"><div class="h-card flex align-content-center"><figure class=icon-xxl><img alt="profile photo" class=u-photo src=https://www.joshkasuboski.com/img/josh-scotland.jpg></figure><div class=margin-left-m><h3 class=display-title><a class="u-url p-name text-decoration-none" href=https://www.joshkasuboski.com/>Josh Kasuboski</a></h3><p>Living in Austin <img class=icon-xs style=vertical-align:middle alt=texas src=https://www.joshkasuboski.com/img/tx-fill.png> from <img class=icon-xs style=vertical-align:middle alt=wisconsin src=https://www.joshkasuboski.com/img/wi-fill.png></p><p id=social><a rel=me class="u-url margin-right-xs" href=https://github.com/kasuboski><img class=icon-xs src=https://www.joshkasuboski.com/icons/github.svg alt=github></a>
<a class=margin-right-xs href=https://linkedin.com/in/joshkasuboski/><img class=icon-xs src=https://www.joshkasuboski.com/icons/linkedin.svg alt=linkedin></a>
<a href=mailto:josh.kasuboski@gmail.com class="u-email margin-right-xxs" rel=me><img class=icon-xs src=https://www.joshkasuboski.com/icons/envelope.svg alt=email></a>
<a href=https://www.joshkasuboski.com/payments/><img class=icon-xs src=https://www.joshkasuboski.com/icons/beer-money-icon.svg alt=beermoney></a></p></div></div></div></footer></div><script async src="https://cdn.panelbear.com/analytics.js?site=FK681rNQuKp"></script><script>window.panelbear=window.panelbear||function(){window.panelbearQ=window.panelbearQ||[];panelbearQ.push(arguments);};panelbear('config',{site:'FK681rNQuKp'});</script></body></html>